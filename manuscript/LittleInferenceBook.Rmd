---
output:
  html_document:
    toc: true
    toc_depth: 2
---


```{r book, results='asis', echo = FALSE}

# Get list of .md files
chapters <- list.files(pattern = "[.]md")

# Order the files starting with the non-numbered
chapters <- chapters[order(grepl("^[0-9]", chapters), chapters)]

# Set the encoding
encoding <- "Latin1"

# Output the content of every file, substituting the equation markers
invisible(
  sapply(X = chapters, encoding = encoding,
         FUN = function(file, encoding){
           # Read in file contents
           contents <- readLines(con = file, encoding = encoding)
           
           # Replace with correct equation markers
           contents <- gsub(pattern = "[{]/?[$]{2}[}]",
                            replacement = "$$",
                            x = contents)
           
           # Output file contents
           cat(contents, "\n", sep = "\n")
         })
)
```

